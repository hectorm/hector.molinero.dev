# yaml-language-server: $schema=https://json.schemastore.org/github-workflow.json
name: "Merge"

on:
  workflow_dispatch:
    inputs:
      from:
        description: "From"
        required: true
        default: "master"
      to:
        description: "To"
        required: true
        default: "publish"

permissions: {}

jobs:
  merge:
    name: "Merge"
    runs-on: "ubuntu-latest"
    permissions:
      contents: "write"
    env:
      FROM: "${{ github.event.inputs.from }}"
      TO: "${{ github.event.inputs.to }}"
    steps:
      - name: "Checkout"
        uses: "actions/checkout@a5ac7e51b41094c92402da3b24376905380afc29"
        with:
          ref: "${{ env.TO }}"
      - name: "Merge"
        run: |
          git fetch origin "${FROM:?}:${FROM:?}"
          git merge --no-edit "${FROM:?}"
          git push origin HEAD
